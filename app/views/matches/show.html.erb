<!-- app/views/matches/show.html.erb -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <div class="d-flex align-items-center">
    <%= link_to matches_path, class: "btn btn-outline-secondary me-3" do %>
      <i class="bi bi-arrow-left"></i>
    <% end %>
    <h1 class="mb-0">Match Details</h1>
  </div>
  <div class="btn-group">
    <%= link_to edit_match_path(@match), class: "btn btn-outline-primary" do %>
      <i class="bi bi-pencil"></i> Edit
    <% end %>
    <%= link_to @match, 
        class: "btn btn-outline-danger",
        data: { 
          "turbo-method": :delete,
          "turbo-confirm": "Are you sure you want to delete this match?" 
        } do %>
      <i class="bi bi-trash"></i> Delete
    <% end %>
  </div>
</div>

<div class="row justify-content-center">
  <div class="col-md-10">
    <!-- Match Result Card -->
    <div class="card mb-4">
      <div class="card-body py-4">
        <div class="row align-items-center text-center">
          <!-- Home Team -->
          <div class="col-md-4">
            <div class="mb-3">
              <%= link_to @match.home_team, class: "text-decoration-none" do %>
                <h3 class="mb-1"><%= @match.home_team.name %></h3>
              <% end %>
              <p class="text-muted mb-0">
                <i class="bi bi-house"></i> Home
              </p>
              <small class="text-muted"><%= @match.home_team.city %></small>
            </div>
          </div>
          
          <!-- Score -->
          <div class="col-md-4">
            <div class="mb-3">
              <h1 class="display-3 mb-0">
                <span class="<%= 'text-success' if @match.home_score > @match.away_score %>">
                  <%= @match.home_score %>
                </span>
                <span class="text-muted">-</span>
                <span class="<%= 'text-success' if @match.away_score > @match.home_score %>">
                  <%= @match.away_score %>
                </span>
              </h1>
              <% if @match.draw? %>
                <span class="badge bg-warning text-dark fs-6">Draw</span>
              <% elsif @match.winner %>
                <span class="badge bg-success fs-6">
                  <i class="bi bi-trophy"></i> <%= @match.winner.name %> Wins
                </span>
              <% end %>
            </div>
            <p class="text-muted mb-0">
              <i class="bi bi-calendar"></i>
              <%= @match.match_date.strftime("%B %d, %Y") %>
            </p>
            <small class="text-muted">
              <%= @match.match_date.strftime("%I:%M %p") %>
            </small>
          </div>
          
          <!-- Away Team -->
          <div class="col-md-4">
            <div class="mb-3">
              <%= link_to @match.away_team, class: "text-decoration-none" do %>
                <h3 class="mb-1"><%= @match.away_team.name %></h3>
              <% end %>
              <p class="text-muted mb-0">
                <i class="bi bi-airplane"></i> Away
              </p>
              <small class="text-muted"><%= @match.away_team.city %></small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Match Statistics -->
    <div class="row">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">
              <i class="bi bi-bar-chart"></i>
              Match Statistics
            </h5>
          </div>
          <div class="card-body">
            <div class="row text-center">
              <div class="col-6">
                <h4><%= @match.total_goals %></h4>
                <small class="text-muted">Total Goals</small>
              </div>
              <div class="col-6">
                <h4><%= (@match.total_goals / 2.0).round(1) %></h4>
                <small class="text-muted">Goals per Team</small>
              </div>
            </div>
            <hr>
            <div class="mb-2">
              <div class="d-flex justify-content-between">
                <small>Goals Scored</small>
              </div>
              <div class="d-flex justify-content-between">
                <span><%= @match.home_team.name %>:</span>
                <strong><%= @match.home_score %></strong>
              </div>
              <div class="d-flex justify-content-between">
                <span><%= @match.away_team.name %>:</span>
                <strong><%= @match.away_score %></strong>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-md-6">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">
              <i class="bi bi-info-circle"></i>
              Match Information
            </h5>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <strong>Date:</strong><br>
              <span class="text-muted">
                <%= @match.match_date.strftime("%A, %B %d, %Y at %I:%M %p") %>
              </span>
            </div>
            
            <div class="mb-3">
              <strong>Venue:</strong><br>
              <span class="text-muted">
                <%= @match.home_team.city %> (Home venue)
              </span>
            </div>
            
            <div class="mb-3">
              <strong>Result:</strong><br>
              <% if @match.draw? %>
                <span class="badge bg-warning text-dark">Draw</span>
              <% else %>
                <span class="badge bg-success">
                  <%= @match.winner.name %> Victory
                </span>
              <% end %>
            </div>

            <div class="mb-0">
              <strong>Match Day:</strong><br>
              <span class="text-muted">
                <%= time_ago_in_words(@match.match_date) %> ago
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Team Records -->
    <div class="row mt-4">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">
              <i class="bi bi-graph-up"></i>
              Head-to-Head Record
            </h5>
          </div>
          <div class="card-body">
            <div class="row text-center">
              <div class="col-md-4">
                <h4 class="text-primary"><%= @match.home_team.name %></h4>
                <p class="mb-0">
                  <%= link_to "View Team", @match.home_team, class: "btn btn-sm btn-outline-primary" %>
                </p>
              </div>
              <div class="col-md-4">
                <h5 class="text-muted">vs</h5>
                <small class="text-muted">Recent matchup</small>
              </div>
              <div class="col-md-4">
                <h4 class="text-info"><%= @match.away_team.name %></h4>
                <p class="mb-0">
                  <%= link_to "View Team", @match.away_team, class: "btn btn-sm btn-outline-info" %>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>